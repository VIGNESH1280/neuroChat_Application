import * as fs from "node:fs/promises";
import path from "node:path";
import { isModeExecutable } from "./isModeExecutable.js";
export async function intakeFromDirectory(directoryPath, settings = {}) {
    const directory = {};
    const children = await fs.readdir(directoryPath);
    for (const child of children) {
        if (settings.exclude?.test(child)) {
            continue;
        }
        const childPath = path.join(directoryPath, child);
        const stat = await fs.stat(childPath);
        directory[child] = stat.isDirectory()
            ? await intakeFromDirectory(childPath, settings)
            : [
                (await fs.readFile(childPath)).toString(),
                { executable: isModeExecutable(stat.mode) },
            ];
    }
    return directory;
}
//# sourceMappingURL=intakeFromDirectory.js.map