import { mergeFileEntries } from "./mergeFileEntries.js";
export function mergeCreatedDirectories(firsts, seconds) {
    return mergeCreatedDirectoriesWorker(firsts, seconds, []);
}
function mergeCreatedDirectoriesWorker(firsts, seconds, path) {
    const result = { ...firsts };
    for (const i in seconds) {
        const second = seconds[i];
        if (!(i in firsts)) {
            result[i] = second;
            continue;
        }
        const first = firsts[i];
        const nextPath = [...path, i];
        const firstIsDirectory = typeof first === "object" && !Array.isArray(first);
        const secondIsDirectory = typeof second === "object" && !Array.isArray(second);
        if (firstIsDirectory !== secondIsDirectory) {
            throw new Error(`Conflicting created directory and file at path: '${nextPath.join("/")}'.`);
        }
        result[i] = firstIsDirectory
            ? mergeCreatedDirectoriesWorker(first, second, nextPath)
            : mergeFileEntries(first, second, nextPath);
    }
    return result;
}
//# sourceMappingURL=mergeCreatedDirectories.js.map